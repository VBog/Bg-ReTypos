### RETypos ###
Contributors: VBog

Tags: ошибка, опечатка, исправление

Requires at least: 3.0.1

Tested up to: 5.2.3

Stable tag: master

License: GPLv2

License URI: http://www.gnu.org/licenses/gpl-2.0.html

Позволяет пользователям Вашего сайта отправлять сообщения об опечатках на его страницах.

## Description ##
Плагин позволяет пользователям Вашего сайта отправлять сообщения об опечатках на его страницах (в тексте, заголовке и аннотации). Основан на React JS и Bootstrap.

На странице сайта при нажатии комбинации клавиш "Ctrl+Enter" будет открыт модальный диалог, с помощью которого пользователи могут отправить сообщение об опечатках.

Сервис состоит из трёх частей:

1. сервер и админка
`https://gitlab.eterfund.ru/eterfund/typoservice`
2. клиент, который подключается на сайт
`https://gitlab.eterfund.ru/eterfund/typos`
3. php-шаблон для встраивания в сайт для исправления опечаток
`https://gitlab.eterfund.ru/eterfund/retypos-adapter`

Админка сервиса: `https://eterfund.ru/api/typos/cp/`

JS-клиент для отправки сообщения об ошибке на сервер: `https://unpkg.com/@etersoft/retypos-webclient` - подгружается плагином.

Для работы сервиса используется Json-RPC PHP client/server библиотека [Simple Json-RPC PHP](https://github.com/matasarei/JsonRPC).
Для загрузки серверной части этой библиотеки используется файл `installJsonRPC.php`.

Следует иметь ввиду, что сервис отправляет запрос на URL https://your-site.ru/project/correctTypo который обрабатывается файлом, `correctTypo.php`, расположенном в папке плагина.

При активации плагин автоматически добавляет новое правило перезаписи URL в структуру правил WordPress в файле  `.htaccess`:
```
RewriteRule ^correctTypo$ /propovedi/wp-content/plugins/retypos/correctTypo.php [QSA,L]
```
и удаляет его при деактивации плагина.

Установить баннер ![ReTypos banner](https://gitlab.eterfund.ru/VBog/RETypos/raw/master/img/retypos.png) на странице можно используя либо шорт-код `[retypos_banner]`, либо функцию `retypos_banner();`:
```php
	<?php if (function_exists('retypos_banner')) echo retypos_banner(); ?>
```

## Changelog ##

= 1.5.2 =

* Убирает переносы

  ```
  &shy;
  ```

= 1.5.1 =

* Очищает модальное окно после его закрытия

= 1.5.0 =

* Возвращает на сервер путь к файлу correctTypo.php


= 1.4.1 =

* Fixed notice

= 1.4.0 =

* Заново переписана клиентская часть сервиса.
* Клиентский интерфейс адаптирован для мобильных устройств
* Щелчок по баннеру при выделенном тексте вызывает диалоговое окно исправления ошибки

= 1.3.4 =

* Исправлена бага при определении слага поста для ссылок с добавленным номером страницы, например /%postname%/68

= 1.3.3 =

* Исправлена бага при определении слага поста для ссылок с добавленным расширением, например /%postname%.shtml

= 1.3.2 =

* Исправлена бага при определении слага поста для ссылок формата /%postname%/#anchor

= 1.3.1 =

* Исправлена бага при замене специальных символов стандартными 

= 1.3.0 =

* Добавлены настройки плагина

= 1.2.5 =

* Исправлена бага с заменой двойного пробела и переноса строк

= 1.2.4 =

* Запись в error_log только при возникновении ошибок.

= 1.2.3 =

* Реализована мечта Виталия - убран файл retypo.php из корня.
* Обработаны случаи ссылок с якорями и бред с "корварами"
* Пофисены патерны ошибок и контекста.

= 1.2.2 =

* Испровлены ошибки в clearText()

= 1.2.1 =

* Запрещена отправка ошибок не со страниц постов

= 1.2.0 =

* Добавлен баннер

= 1.1.1 =

* В класс TyposClientInterface добавлена абстрактная функция для очистки текста от тегов и специальных символов.

= 1.1.0 =

* Исправлены логические и программые ошибки в классе `TyposClientInterface`
* Разрешены пользовательские типы записей
* Добавлена обработка `post_excerpt` в качестве `subtitle`


= 1.0.5 =

* Удаляет RewriteRule при деактивации плагина


= 1.0.4 =

* При активации плагин автоматически добавляет правило перезаписи URL в структуру правил WordPress в файле  `.htaccess`


= 1.0.3 =

* Переименовал файл в корне файла correctTypo.php в reTypo.php

= 1.0.2 =

* Проверка IP сервера.

= 1.0.1 =

* Исправлена ошибка определения site_url().
* Исправлен `.htaccess`

= 1.0 =

* Первый релиз плагина.

